@using PortableRazor.Web.Mvc
@inherits PortableRazor.ViewBase
@model Chords.Android.Models.ShowChordResultModel
@{
    var symbol = Model?.ChordDecorator?.Symbols[0];
    var otherSymbols = Model.ChordDecorator != null ? Model.ChordDecorator.Symbols.Skip(1) : new string[0];
    var allRoots = Model.Parameters["roots"]?.Split(',');
    var allChordTypes = Model.Parameters["types"]?.Split(',');
}
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="bootstrap.min.css" />
</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <span class="navbar-brand">Show chord chart</span>
            </div>
                
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="hybrid:ShowChord?conv=@Model.Parameters["conv"]">Show chord chart</a></li>
                    <li><a href="hybrid:FindChord?conv=@Model.Parameters["conv"]">Find chord name</a></li>
					<li><a href="hybrid:Circle?conv=@Model.Parameters["conv"]">Circle of fifths</a></li>
					<li><a href="hybrid:FavoriteChords?conv=@Model.Parameters["conv"]">Favourite chords</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <script src="jquery.min.js"></script>
    <script src="bootstrap.min.js"></script>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 main-content">

		<!-- Main content start -->
		@if (allRoots!= null && allRoots.Length > 1)
		{
			@(new HtmlString("<h4 class=\"other-chords\">Chords found:\n"))
			for(var i = 0; i < allRoots.Length; i++)
			{
                <a href="hybrid:ShowChord?root=@(allRoots[i])&type=@(allChordTypes[i])&roots=@(Model.Parameters["roots"])&types=@(Model.Parameters["types"])&partial=@(Model.Parameters["partial"])&special=@(Model.Parameters["special"])&conv=@(Model.Parameters["conv"])">@(allRoots[i])@(allChordTypes[i])</a>
			}
            @(new HtmlString("\n</h4>\n"))
		}
        @if (Model.ChordDecorator != null)
		{
		    <h2>@symbol</h2>

			if (otherSymbols.Any())
			{
			    <h4>Other symbols:</h4>
			    foreach(var otherSymbol in otherSymbols)
			    {
			        <span>@otherSymbol</span>
			    }
			}
			<h4>Chord intervals:</h4>
			<p>
			@foreach(var interval in Model.ChordDecorator.Intervals)
			{
			    <span>@interval</span>
			}
			</p>

			<h4>Chord notes:</h4>
			<p>
			@foreach(var note in Model.ChordDecorator.Notes)
			{
			    <span>@note</span>
			}
			</p>
		}
		<div id="error" class="error">@Model.Error</div>
        @if (string.IsNullOrEmpty(Model.Error))
		{
			<div id="loader"></div>
			<script>
				$(document).ready(function (){
	                $.ajax({
	                    url: 'hybrid:ShowChordLayouts',
	                    type: 'get',
	                    data: {
	                        root: '@Model.Parameters["root"]',
	                        type: '@Model.Parameters["type"]',
                            roots: '@Model.Parameters["roots"]',
                            types: '@Model.Parameters["types"]',
	                        partial: '@Model.Parameters["partial"]',
	                        special: '@Model.Parameters["special"]',
	                        conv: '@Model.Parameters["conv"]'
	                    }
					});
				});
			</script>
		}
        <!-- Main content end -->	

    </div>
    <hr />
    <footer>
        <p>&copy; 2017 - Tomáš Němec</p>
    </footer>
</body>
</html>
